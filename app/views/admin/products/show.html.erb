<%= provide :title, 'Product Detail' %>

<div class="d-flex justify-content-start mb-3">
  <div class="p-2">
    <%= link_to admin_products_path, class: 'btn btn-secondary' do %>
      <i class="fa fa-arrow-left" aria-hidden="true"></i> Return to List
    <% end %>
    <%= link_to edit_admin_product_path(@product), class: 'btn btn-warning' do %>
      <i class="fa fa-edit" aria-hidden="true"></i> Edit Product
    <% end %>
    <%= link_to '#', class: 'btn btn-info' do %>
      <i class="fa fa-archive" aria-hidden="true"></i> Manage Inventories
    <% end %>
  </div>
</div>

<div class="row">
  <div class="col">
    <div class="jumbotron">
      <h4 class="mb-3 mt-0">Basic Properties</h4>
      <table class="table">
        <tbody>
          <tr>
            <th scope="row">ID</th>
            <td><%= @product.id %></td>
          </tr>
          <tr>
            <th scope="row">Name</th>
            <td><%= @product.name %></td>
          </tr>
          <tr>
            <th scope="row">Tag Line</th>
            <td><%= @product.tag_line %></td>
          </tr>
          <tr>
            <th scope="row">SKU</th>
            <td><%= @product.sku %></td>
          </tr>
          <tr>
            <th scope="row">Strict Inventory</th>
            <td><%= @product.strict_inventory.to_s.try(:capitalize) %></td>
          </tr>
          <tr>
            <th scope="row">Digital Product</th>
            <td><%= @product.digital.to_s.try(:capitalize) %></td>
          </tr>
          <tr>
            <th scope="row">Categories</th>
            <td>
              <ul>
              <% @product.categories.each do |category| %>
                <li><%= category.name %></li>
              <% end %>
              </ul>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <div class="col">
    <div class="jumbotron">
      <h4 class="mb-3 mt-0">Pricing</h4>
      <table class="table">
        <tbody>
          <tr>
            <th scope="row">Market Price</th>
            <td><%= humanized_money_with_symbol(@product.price_market) %></td>
          </tr>
          <tr>
            <th scope="row">Member Price</th>
            <td><%= humanized_money_with_symbol(@product.price_member) %></td>
          </tr>
          <tr>
            <th scope="row">Reward Price</th>
            <td><%= humanized_money_with_symbol(@product.price_reward) %></td>
          </tr>
          <tr>
            <th scope="row">Cost</th>
            <td><%= humanized_money_with_symbol(@product.cost) %></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-12">
    <div class="jumbotron">
      <h5 class="mb-3">Inventories</h5>
      <table class="table">
        <thead>
          <tr>
            <th class="text-center">Total Inventories</th>
            <th class="text-center">Unsold</th>
            <th class="text-center">In Cart</th>
            <th class="text-center">In Order</th>
            <th class="text-center">In Checkout</th>
            <th class="text-center">Sold</th>
            <th class="text-center">Returned</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-center"><%= @product.inventories.count %></td>
            <td class="text-center"><%= @product.inventories.unsold.count %></td>
            <td class="text-center"><%= @product.inventories.in_cart.count %></td>
            <td class="text-center"><%= @product.inventories.in_order.count %></td>
            <td class="text-center"><%= @product.inventories.in_checkout.count %></td>
            <td class="text-center"><%= @product.inventories.sold.count %></td>
            <td class="text-center"><%= @product.inventories.returned.count %></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-12">
    <div class="jumbotron">
      <h5 class="mb-3">Introduction</h5>
      <%= @product.introduction.html_safe %>
    </div>
  </div>
  <div class="col-12">
    <div class="jumbotron">
      <h5 class="mb-3">Specification</h5>
      <%= @product.specification.html_safe %>
    </div>
  </div>
  <div class="col-12">
    <div class="jumbotron">
      <h5 class="mb-3">Description</h5>
      <%= @product.description.html_safe %>
    </div>
  </div>
</div>

<div class="jumbotron">
  <div class="row">
    <div class="col">
      <h5 class="mb-3">Attached Images</h5>
      <% if @product.images.attachment.empty? %>
        <p>No Image</p>
      <% end %>
    </div>
  </div>
  <div class="row">
    <% @product.images.attachment.each do |image| %>
      <div class="col-4">
        <p><%= image.title %></p>
        <p><%= image_tag(image.image_url(:thumb)) %></p>
        <p>
          <%= link_to 'View', admin_image_path(image),
                              class: 'btn btn-sm btn-info' %>
          <% if image.source_channel == 'attachment' %>
            <%= link_to 'Delete', admin_image_path(image, return_loc: @product),
                                  method: :delete,
                                  class: 'btn btn-sm btn-danger',
                                  data: { confirm: 'Are you sure?' } %>
          <% end %>
        </p>
      </div>
    <% end %>
  </div>
</div>
<div class="jumbotron">
  <div class="row">
    <div class="col">
      <h5 class="mb-3">Editor Image Files</h5>
      <% if @product.images.editor.empty? %>
        <p>No Image</p>
      <% end %>
    </div>
  </div>
  <div class="row">
    <% @product.images.editor.each do |image| %>
      <div class="col">
        <p><%= image.title %></p>
        <p><%= image_tag(image.image_url(:thumb)) %></p>
        <p>
          <%= link_to 'View', admin_image_path(image),
                              class: 'btn btn-sm btn-info' %>
          <% if image.source_channel == 'attachment' %>
            <%= link_to 'Delete', admin_image_path(image, return_loc: @product),
                                  method: :delete,
                                  class: 'btn btn-sm btn-danger',
                                  data: { confirm: 'Are you sure?' } %>
          <% end %>
        </p>
      </div>
    <% end %>
  </div>
</div>
